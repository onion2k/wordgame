.app-shell {
  width: min(var(--app-max-width), 100%);
  margin: 0 auto;
  height: 100dvh;
  display: grid;
  grid-template-rows: auto auto 1fr;
  gap: var(--app-gap);
  padding: var(--app-padding);
  box-sizing: border-box;
  animation: page-enter 360ms ease;
}

.game-header {
  text-align: center;
  animation: float-in 420ms ease;
}

.eyebrow {
  font-size: var(--font-size-eyebrow);
  letter-spacing: var(--tracking-wide);
  text-transform: uppercase;
  color: var(--header-eyebrow-text);
  margin: 0 0 var(--space-2xs);
}

.game-header h1 {
  margin: 0;
  font-size: var(--font-size-title);
  color: var(--header-title-text);
}

.game-controls {
  display: grid;
  gap: var(--space-xs);
}

.game-controls__label {
  font-size: var(--font-size-found-header);
  text-transform: uppercase;
  letter-spacing: var(--tracking-medium);
  color: var(--header-eyebrow-text);
  font-weight: 600;
}

.game-controls__select {
  appearance: none;
  border-radius: var(--radius-sm);
  border: var(--border-width) solid var(--found-words-border);
  background: var(--found-words-bg);
  color: var(--page-text);
  font-weight: 600;
  font-size: var(--font-size-found-header);
  padding: var(--space-xl) var(--space-3xl);
  box-shadow: var(--shadow-button);
  transition: transform 160ms ease, box-shadow 200ms ease, border-color 200ms ease;
}

.game-controls__select:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-button-hover);
}

.game-controls__select:focus-visible {
  outline: none;
  border-color: var(--tile-filled-bg);
  transform: translateY(-1px) scale(1.01);
}

.tagline {
  margin: var(--space-xs) 0 0;
  color: var(--header-tagline-text);
  font-size: var(--font-size-tagline);
}

.game-area {
  background: var(--app-panel-bg);
  border: var(--border-width) solid var(--app-panel-border);
  border-radius: var(--radius-lg);
  display: flex;
  flex-direction: column;
  padding: var(--game-area-padding);
  box-shadow: var(--shadow-card);
  animation: panel-rise 380ms ease;
}

.board {
  position: relative;
  display: grid;
  gap: var(--board-gap);
  justify-items: center;
  width: 100%;
  aspect-ratio: 1 / 1;
  touch-action: none;
  user-select: none;
}

.board-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--board-overlay-bg);
  color: var(--board-overlay-text);
  font-weight: 700;
  font-size: var(--font-size-selected);
  letter-spacing: var(--tracking-wide);
  text-transform: uppercase;
  z-index: 2;
  animation: overlay-fade 220ms ease;
}

.row {
  display: grid;
  grid-template-columns: repeat(var(--grid-size, 8), minmax(0, 1fr));
  gap: var(--row-gap);
  width: 100%;
}

.tile {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  aspect-ratio: 1 / 1;
  border-radius: var(--radius-sm);
  border: var(--border-width-dashed) dashed var(--tile-border);
  font-weight: 700;
  color: var(--tile-text);
  background: var(--tile-bg);
  box-shadow: var(--shadow-tile-inset);
  transition: transform 260ms ease, opacity 200ms ease;
  will-change: transform, opacity;
  touch-action: none;
}

.tile.filled {
  background: var(--tile-filled-bg);
  color: var(--tile-filled-text);
  border-color: transparent;
  box-shadow: var(--shadow-tile-filled);
}

.tile.active {
  background: var(--tile-selected-bg);
  color: var(--tile-selected-text);
  border-color: var(--tile-selected-border);
  box-shadow: var(--shadow-tile-active);
  transform: scale(1.05);
}

.tile.highlight {
  background: var(--tile-highlight-bg);
  color: var(--tile-highlight-text);
  box-shadow: var(--tile-highlight-shadow);
  animation: hint-pulse 420ms ease;
}

.tile.removing {
  opacity: 0;
  transform: scale(0.6);
}

.tile.new {
  animation: pop-in 220ms ease;
}

@keyframes pop-in {
  0% {
    transform: translateY(-12%) scale(0.9);
    opacity: 0;
  }
  100% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}

.selection-line {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
}

.selection-line polyline {
  fill: none;
  stroke: var(--selection-line-color);
  stroke-width: var(--selection-line-width);
  stroke-linecap: round;
  stroke-linejoin: round;
  filter: var(--shadow-accent-glow);
  stroke-dasharray: 1;
  stroke-dashoffset: 0;
  animation: line-trace 200ms ease;
}

.controls {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(var(--control-min-width), 1fr));
  gap: var(--controls-gap);
  margin-top: var(--section-gap);
}

.timer {
  margin-top: var(--section-gap);
  height: var(--timer-height);
  background: var(--timer-track-bg);
  border-radius: var(--radius-pill);
  overflow: hidden;
}

.timer__fill {
  display: block;
  width: 100%;
  height: 100%;
  background: var(--timer-fill-bg);
  transform-origin: right;
  transform: scaleX(var(--timer-progress, 1));
  transition: transform 120ms linear;
}

.selected-word {
  display: flex;
  align-items: baseline;
  justify-content: space-around;
  gap: var(--section-gap);
  margin-top: var(--section-gap);
  padding: var(--space-xl) var(--space-3xl);
  border-radius: var(--radius-sm);
  background: var(--selected-word-bg);
  border: var(--border-width) solid var(--selected-word-border);
  transition: box-shadow 200ms ease, transform 200ms ease;
}

.selected-word__value {
  font-size: var(--font-size-selected);
  font-weight: 700;
  color: var(--selected-word-text);
  letter-spacing: var(--tracking-wide);
  animation: word-pop 220ms ease;
  text-shadow: 0 10px 22px hsl(130 39% 11% / 0.16);
}

.selected-word__value.is-placeholder {
  opacity: 0.6;
  animation: none;
}

.found-words {
  margin-top: var(--section-gap);
  padding: var(--space-2xl) var(--space-4xl);
  border-radius: var(--radius-md);
  background: var(--found-words-bg);
  border: var(--border-width) solid var(--found-words-border);
  display: grid;
  gap: var(--controls-gap);
  animation: float-in 420ms ease;
}

.found-words__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-weight: 700;
  color: var(--found-words-header-text);
  text-transform: uppercase;
  letter-spacing: var(--tracking-medium);
  font-size: var(--font-size-found-header);
}

.found-words__count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: var(--count-min-width);
  padding: var(--pill-padding-y) var(--pill-padding-x);
  border-radius: var(--radius-pill);
  background: var(--found-words-count-bg);
  color: var(--found-words-count-text);
  animation: badge-bounce 240ms ease;
}

.found-words__score-total {
  font-weight: 700;
  color: var(--found-words-score-text);
  animation: badge-bounce 240ms ease;
}

.found-words__empty {
  margin: 0;
  color: var(--found-words-empty-text);
  font-size: var(--font-size-found-empty);
  animation: fade-up 260ms ease;
}

.found-words__list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: grid;
  gap: var(--list-gap);
  max-height: calc((var(--found-words-row-size) * 6) + (var(--list-gap) * 5));
  overflow-y: auto;
  padding-right: var(--space-xs);
  scrollbar-gutter: stable;
}

.found-words__item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  min-height: var(--found-words-row-size);
  padding: var(--space-sm) var(--space-lg);
  border-radius: var(--radius-xs);
  background: var(--found-words-item-bg);
  color: var(--found-words-item-text);
  font-weight: 600;
  animation: list-rise 240ms ease;
  animation-delay: var(--list-delay, 0ms);
  animation-fill-mode: both;
  transition: transform 160ms ease, box-shadow 200ms ease;
}

.found-words__item:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 18px hsl(130 39% 11% / 0.12);
}

.found-words__word {
  letter-spacing: var(--tracking-wide);
}

.found-words__score {
  font-variant-numeric: tabular-nums;
  color: var(--found-words-score-text);
}

.controls button {
  border: none;
  border-radius: var(--radius-sm);
  padding: var(--button-padding-y) var(--button-padding-x);
  font-weight: 700;
  background: var(--button-bg);
  color: var(--button-text);
  cursor: pointer;
  box-shadow: var(--shadow-button);
  transition: transform 120ms ease, box-shadow 120ms ease, background 120ms ease;
}

.controls button.primary {
  background: var(--button-primary-bg);
  color: var(--button-primary-text);
}

.controls button:hover {
  transform: translateY(var(--hover-raise));
  box-shadow: var(--shadow-button-hover);
}

.controls button:active {
  transform: translateY(0) scale(0.98);
}

.controls button:disabled {
  cursor: default;
  transform: none;
  box-shadow: none;
  background: var(--button-disabled-bg);
  color: var(--button-disabled-text);
}

.controls button:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px hsl(130 39% 11% / 0.15);
}

.notification {
  background: var(--notification-bg);
  color: var(--notification-text);
  border-radius: var(--radius-md);
  padding: var(--space-4xl) var(--space-5xl);
  border: var(--border-width) solid var(--notification-border);
  box-shadow: var(--shadow-card-strong);
  animation: pop-in 220ms ease;
}

.notification p {
  margin: 0;
  font-weight: 600;
}

@keyframes page-enter {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes float-in {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes panel-rise {
  from {
    opacity: 0.9;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes overlay-fade {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes line-trace {
  from {
    stroke-dashoffset: 1;
  }
  to {
    stroke-dashoffset: 0;
  }
}

@keyframes word-pop {
  0% {
    transform: translateY(6px) scale(0.92);
    opacity: 0.3;
    letter-spacing: 0.14em;
  }
  60% {
    transform: translateY(-2px) scale(1.06);
  }
  100% {
    transform: translateY(0) scale(1);
    opacity: 1;
    letter-spacing: var(--tracking-wide);
  }
}

@keyframes hint-pulse {
  0% {
    transform: scale(0.96);
  }
  50% {
    transform: scale(1.04);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes badge-bounce {
  0% {
    transform: scale(0.92);
    opacity: 0.6;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes fade-up {
  from {
    opacity: 0;
    transform: translateY(6px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes list-rise {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation: none !important;
    transition: none !important;
  }
}
